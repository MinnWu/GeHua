<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>格华智能数字交易系统</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <style>
        body {
            /* background: rgb(182, 233, 186); */
            background: rgb(0 0 0 / 90%);
            margin-top: 15px;
            margin-bottom: 15px;
            margin-left: 15px;
            margin-right: 15px;
            font-family: fangsong;
        }

        .backandnext {
            width: 100%;
            height: 70px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .step {
            width: 80px;
            height: 80px;
            background-color: white;
            color: black;
        }

        .back {
            border-radius: 0px 75px 0px 0px;
        }

        .next {
            border-radius: 75px 0px 0px 0px;
        }

        .title {
            width: 800px;
            height: 100px;
            background-color: white;
            margin: 0 auto;
            border-radius: 20px 20px 20px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .large {
            width: 100%;
            margin: 0 auto;
            position: absolute;
            top: 1%;
            left: 50%;
            transform: translate(-50%, 0%);
        }

        p {
            font-size: 52px;
        }

        .welcome {
            display: block;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .product {
            display: none;
        }

        .logo {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        #Action {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background-color: white;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: gray;
        }

        input {
            width: 760px;
            height: 100px;
            font-size: 32px;
            background-color: transparent;
            border: none;
            outline: none;
            border-bottom: 1px solid grey;
        }

        input:-internal-autofill-previewed,
        input:-internal-autofill-selected {
            -webkit-text-fill-color: black !important;
            transition: background-color 5000s ease-in-out 0s !important;
        }

        span {
            font-size: 36px;
        }

        .row {
            width: 800px;
            border-radius: 20px 20px 20px 20px;
            background-color: white;
            margin: 0 auto;
        }

        .small {
            height: 180px;
            margin-top: 15px;
            margin-bottom: 15px;
            margin-left: 15px;
            margin-right: 15px;
        }

        .small div:nth-child(1) {
            height: 60px;
        }

        .small div:nth-child(2) {
            height: 120px;
        }

        .small div {
            display: flex;
            align-items: center;
        }

        .submit {
            width: 800px;
            height: 100px;
            border-radius: 20px 20px 20px 20px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            background-color: gray;
            border-style: solid;
            align-items: center;
            color: white;
        }

        .submit span {
            font-size: 42px;
            font-weight: bold;
        }

        .key {
            height: 70px;
            width: 780px;
            display: flex;
            justify-content: flex-end;
            align-items: flex-start;
        }

        .key div {
            width: 50px;
        }


        .add {
            border: 1px solid;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgb(0 0 0 / 80%);
            color: white;
            transition: color .25s;
            position: relative;
        }

        .add::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            width: 30px;
            margin-left: -15px;
            margin-top: -5px;
            border-top: 10px solid;
        }

        .add::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            height: 30px;
            margin-left: -5px;
            margin-top: -15px;
            border-left: 10px solid;
        }

        .del {
            border: 1px solid;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgb(0 0 0 / 80%);
            color: white;
            transition: color .25s;
            position: relative;
        }

        .del::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            width: 30px;
            margin-left: -15px;
            margin-top: -5px;
            border-top: 10px solid;
        }

        .prompt {
            display: none;
            border-radius: 10px 10px 10px 10px;
            background-color: rgba(255, 255, 255, 0.856);
        }

        .black_overlay {
            display: none;
            position: fixed;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1001;
        }

        .white_content {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            width: 65%;
            border: 1px solid rgb(0, 0, 0);
            background-color: white;
            z-index: 1002;
            overflow: auto;
            transform: translate(-50%, -50%);
        }

        .prompt.title {
            width: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgb(182, 233, 186);
            border-radius: 10px 10px 0px 0px;
            color: black;
        }

        .prompt span {
            font-size: 42px;
        }

        .close {
            width: auto;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .close div {
            width: 300px;
            height: 80px;
            border-radius: 10px 10px 10px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgb(0 0 0 / 80%);
            color: rgb(255 255 255 / 86%);
            font-weight: bold;
        }

        #content {
            text-align: center;
        }

        #content p {
            font-size: 42px;
            font-family: '简体';
        }

        table {
            width: 100%;
            text-align: center;
            font-size: 46px;
            font-family: '简体';
        }

        .productTable {
            color: white;
        }

        .productTable thead {
            background-color: gray;
            font-size: 36px;
        }

        .productTable tbody {
            text-align: center;
            font-size: 36px;
            font-family: 简体;
        }

        .productTable tbody tr {
            height: 60px;
        }

        .productTable tbody tr td:nth-child(1) {
            color: yellow;
        }

        .detailTable {
            display: none;
            text-align: center;
            color: white;
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .detailTable div:nth-child(1) {
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 简体;
        }

        .detailTable span {
            font-size: 56px;
        }

        .detailTable tbody {
            text-align: center;
            font-size: 36px;
            font-family: 简体;
        }

        .detailTable tbody tr {
            height: 100px;
        }

        .detailTable tr td:nth-child(1) {
            width: 50%;
        }
    </style>
    <script>// var list = ['产品名称', '起始日期', '初始价格', '结束日期', '末期价格', '波动率', '溢价率',]
        var list = [
            'Please enter contract name.(合约名称)',
            'Please enter GeHua trend.(格华趋势)',
            'Please enter time to level.(时机级别)',
            'Please enter action time.(行动时机)',
            'Please enter GeHua priority.(格华优选)',
            'Positions in management.(仓位管理)',
            'Please enter risk management.(风险控制)',
            'Please enter profit target.(盈利目标)'
        ]
        var contract = {
            'name': '合约名称',
            'trend': '格华趋势',
            'level': '时机级别',
            'action': '行动时机',
            'priority': '优先级',
            'Positions': '仓位管理',
            'risk': '风险控制',
            'profit': '盈利目标'
        }

        //生成商品信息列表
        const productList = (divele = 'list') => {
            let div, input, eleObj, small, mini, span, key, add, del, a, kdiv
            eleObj = document.getElementById(divele)
            div = document.createElement('div')
            div.className = 'row'
            for (let index = 0; index < list.length; index++) {
                small = document.createElement('div')
                small.className = 'small'
                mini = document.createElement('div')
                span = document.createElement('span')
                span.innerHTML = list[index]
                mini.appendChild(span)
                small.appendChild(mini)
                mini = document.createElement('div')
                input = document.createElement('input')
                input.type = 'text'
                input.id = Object.keys(contract)[index]
                mini.appendChild(input)
                small.appendChild(mini)
                div.appendChild(small)
            }
            key = document.createElement('div')
            key.className = 'key'
            add = document.createElement('div')
            add.className = 'add'
            key.appendChild(add)
            kdiv = document.createElement('div')
            key.appendChild(kdiv)
            del = document.createElement('div')
            del.className = 'del'
            key.appendChild(del)
            div.appendChild(key)
            eleObj.appendChild(div)
        }

        //增加商品信息列表
        const addElement = (ele) => {
            let div, input, small, mini, span, key, add, del, kdiv
            div = document.createElement('div')
            div.className = 'row'
            for (let index = 0; index < list.length; index++) {
                small = document.createElement('div')
                small.className = 'small'
                mini = document.createElement('div')
                span = document.createElement('span')
                span.innerHTML = list[index]
                mini.appendChild(span)
                small.appendChild(mini)
                mini = document.createElement('div')
                input = document.createElement('input')
                input.type = 'text'
                input.id = Object.keys(contract)[index]
                mini.appendChild(input)
                small.appendChild(mini)
                div.appendChild(small)
            }
            key = document.createElement('div')
            key.className = 'key'
            add = document.createElement('div')
            add.className = 'add'
            key.appendChild(add)
            kdiv = document.createElement('div')
            key.appendChild(kdiv)
            del = document.createElement('div')
            del.className = 'del'
            key.appendChild(del)
            div.appendChild(key)
            ele.after(div)
        }

        //删除商品信息列表
        const delProduct = (ele) => {
            if (document.querySelectorAll('.row').length != 1) {
                ele.remove()
            } else {
                console.log('至少要保留一个商品，不可以删除完。')
            }
        }

        // 非空校验
        const notEmptyCheck = () => {
            var ele, flag = true, i = 1, arr = Object.keys(contract)
            do {
                for (let index = 0; index < arr.length; index++) {
                    ele = document.querySelector('.row:nth-child(' + i + ') #' + arr[index]).value
                    if (ele == null || ele == "") {
                        document.querySelector('.row:nth-child(' + i + ') #' + arr[index]).style.border = '1px solid red'
                        flag = false
                    } else {
                        document.querySelector('.row:nth-child(' + i + ') #' + arr[index]).style.border = 'none'
                        document.querySelector('.row:nth-child(' + i + ') #' + arr[index]).style['border-bottom'] = '1px solid grey'
                    }
                }
                i++
            } while (i <= document.querySelectorAll('#list .row').length);
            return flag
        }

        //获取商品信息列表的值，返回一个json对象
        const getData = () => {
            var val, obj = {}, i = 1, arr = Object.keys(contract)
            do {
                var objrow = {}
                for (let index = 0; index < arr.length; index++) {
                    val = document.querySelector('.row:nth-child(' + i + ') #' + arr[index]).value
                    if (index >= 5) {
                        val = val + '%'
                    }
                    objrow[arr[index]] = val
                }
                var name = document.querySelector('.row:nth-child(' + i + ') #name').value
                obj[name] = objrow
                i++
            } while (i <= document.querySelectorAll('#list .row').length);
            return obj
        }

        //创建产品列表
        const createPorductTable = (obj, ele = '.productTable') => {
            var eleObj, table, thead, tbody, tr, th, td, arr = Object.keys(contract), array = Object.keys(obj)
            eleObj = document.querySelector(ele)
            table = document.createElement('table')
            thead = table.createTHead()
            tbody = table.createTBody()
            tr = document.createElement("tr");
            for (let index = 0; index < 5; index++) {
                th = document.createElement("th")
                th.innerHTML = contract[arr[index]]
                tr.appendChild(th)
            }
            thead.appendChild(tr)
            for (let index = 0; index < array.length; index++) {
                var tr = document.createElement("tr")
                for (var j = 0; j < 5; j++) {
                    td = document.createElement("td")
                    td.innerHTML = obj[array[index]][arr[j]]
                    tr.appendChild(td)
                }
                tbody.appendChild(tr)
            }
            eleObj.appendChild(table)
        }

        //创建详情列表
        const createDetailTable = (obj) => {
            document.querySelector('.detailTable #name').innerHTML = obj['name']
            document.querySelector('.detailTable #Positions').innerHTML = obj['Positions']
            document.querySelector('.detailTable #risk').innerHTML = obj['risk']
            document.querySelector('.detailTable #profit').innerHTML = obj['profit']
        }

        $(function () {
            var data, loction
            $('.backandnext').hide()
            $('#Action').on('click', function () {
                if ($('.row').length == 0) {
                    productList();
                }
                $('.product').show()
                $('.welcome').hide()
            });
            $('#list').delegate('.add', 'click', function () {
                // $(this).parent() 此#add元素的父级元素
                addElement($(this).parent().parent())
            });
            $('#list').delegate('.del', 'click', function () {
                delProduct($(this).parent().parent())
            });
            $('.submit').on('click', function () {
                loction = '.productTable'
                if (notEmptyCheck()) {
                    data = getData()
                    $('.product').hide()
                    createPorductTable(data)
                    $(loction).show()
                    $('.backandnext').show()
                }
            });
            $('.productTable').delegate('tbody tr', 'click', function () {
                loction = '.detailTable'
                $('.productTable').hide()
                var name = $(this).context.querySelector('td:nth-child(1)').innerText
                createDetailTable(data[name])
                $('.detailTable').show()
            })
            $('.back').on('click', function () {
                console.log(loction)
                switch (loction) {
                    case '.productTable':
                        $(loction).hide()
                        $(loction).empty()
                        $('.backandnext').hide()
                        loction = '.product'
                        $(loction).show()
                        break;
                    case '.detailTable':
                        $(loction).hide()
                        loction = '.productTable'
                        $(loction).show()
                        break;
                }
            })
            $('.next').on('click', function () {

            })
        });
    </script>
</head>

<body>
    <div>
        <div class="large welcome">
            <div class="logo">
                <p>Welcome and use GeHua</p>
            </div>
            <div id="Action">
                <p>Action</p>
            </div>
        </div>
        <div class="large product">
            <div class="title">
                <p>Product Information</p>
            </div>
            <div id="list">
            </div>
            <hr>
            <div class="submit">
                <span>Confirm</span>
            </div>
            <hr>
        </div>
        <div class="large productTable"> </div>
        <div class="large detailTable">
            <div>
                <span id="name"></span>
            </div>
            <div>
                <table>
                    <tbody>
                        <tr>
                            <td>仓位管理</td>
                            <td id="Positions"></td>
                        </tr>
                        <tr>
                            <td>风险控制</td>
                            <td id="risk"></td>
                        </tr>
                        <tr>
                            <td>盈利目标</td>
                            <td id="profit"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="backandnext">
        <div class="step back">
        </div>
        <div class="step next">
        </div>
    </div>
    <!-- <div id="fade" class="black_overlay">
        <div class="large prompt white_content">
            <div class="prompt title">
                <span>System Message</span>
            </div>
            <div class="prompt content">
                <div id="content"></div>
            </div>
            <div class="close">
                <div>
                    <span>Close</span>
                </div>
            </div>
        </div>

    </div> -->
</body>


</html>